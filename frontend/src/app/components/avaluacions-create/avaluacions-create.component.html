<div class="container">
	<br>

	<nav aria-label="breadcrumb" role="navigation">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a routerLink="/" routerLinkActive="active">Home</a></li>
		</ol>
	</nav>

	<div class="row">
		<div class="col-12">
			<div class="mt-3">
					
				<!-- Nova assignatura -->
				<div class="mt-3">
					<h1>Nova avaluaci贸</h1>
				</div>

				<!-- <div class="mt-3">
					<h4>Informaci贸 prova</h4>
				</div> -->

				<form
				class="animated fadeIn"
				(ngSubmit)="newAvaluacio()"
				#newAvaluacioForm="ngForm">

					<dl class="form-group row">
						<div class="col-xs-12 col-sm-6">
							<dt>
								<label class="form-label" for="nom-avaluacio">Nom nova avaluaci贸</label>
							</dt>
							<dd>
								<input
								[(ngModel)]="avaluacio.nom"
								name="nom"
								type="text" 
								class="form-control" 
								id="nom-avaluacio"
								required>
							</dd>
							<br><br>
							<dt>
								<label class="form-label" for="curs-avaluacio">Curs</label>
							</dt>
							<dd>
								<select 
								class="form-control" 
								id="curs-avaluacio"
								name="avaluacio.curs"
								[(ngModel)]="cursId" 
								(ngModelChange)="toCurs()"
								required>
									<option 
									*ngFor="let curs of cursos" 
									[ngValue]="curs.id">
										{{ curs.nom }}
									</option>
								</select>
							</dd>
							<dt>
								<label class="form-label" for="assignatura-avaluacio">Assignatura</label>
							</dt>
							<dd>
								<select 
								class="form-control" 
								id="assignatura-avaluacio"
								name="avaluacio.assignatura"
								[(ngModel)]="assignaturaId" 
								(ngModelChange)="toAssignatura()"
								required>
									<option 
									*ngFor="let assignatura of assignatures" 
									[ngValue]="assignatura.id">
										{{ assignatura.nom }}
									</option>
								</select>
							</dd>
						</div>
						<div class="col-xs-12 col-sm-6">
							<div *ngIf="avaluacionsSelected?.length>0">
								<dt>
									<label class="form-label">Avaluacions existents</label>
								</dt>
								<accordion>
									<accordion-group *ngFor="let avaluacio of avaluacionsSelected">
										<div accordion-heading>
											<span>{{ avaluacio?.nom }}</span>
											<span class="badge badge-secondary float-right pull-right" style="padding: 5px; height: 22px; font-size: 14px; width: 20px;">{{ avaluacio?.proves_avaluacio.length }}</span>
										</div>
										<ul>
											<li *ngFor="let prova of avaluacio.proves_avaluacio">{{ prova.nom }}</li>
										</ul>
									</accordion-group>
								</accordion>
							</div>
						</div>
					</dl>

				</form>

				<hr>
				<!-- <br> -->

				<!-- Add button -->
				<button 
				type="submit" 
				class="btn btn-success float-right"
				[disabled]="!newAvaluacioForm.valid"
				(click)="newAvaluacio()">
				Guardar
				</button>
				
				<!-- Cancelar -->
				<button 
				type="button" 
				class="btn btn-secondary float-left"
				[routerLink]="['/home']">
				Cancel路lar
				</button>

			</div>
		</div>
	</div>
</div>